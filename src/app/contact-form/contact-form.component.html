<div class="dialog-content">
  <form (ngSubmit)="onSubmit()" #contactForm="ngForm">
    <h2 class="dialog-title">{{ data.isEdit ? 'Update Contact' : 'Add Contact' }}</h2>

    <div class="form-group">
      <div class="profile-picture" (click)="chooseAvatarFile()">
        <img *ngIf="newContact.avatar" [src]="newContact.avatar" alt="Profile Picture" class="profile-image">
        <div *ngIf="!newContact.avatar" class="default-avatar">{{ newContact.fullName.charAt(0) }}</div>
        <div class="camera-icon">
          <mat-icon>photo_camera</mat-icon>
        </div>
      </div>
      <input type="file" id="avatar" name="avatar" accept="image/*" (change)="handleAvatarUpload($event)" hidden>
    </div>

    <div class="form-group">
      <label for="phone">Phone:</label>
      <input type="text" id="phone" name="phone" class="form-control" [(ngModel)]="newContact.phone" required
        pattern="^\+60\d{8,}$" placeholder="+60xxxxxxxxx">
      <div *ngIf="contactForm.controls['phone'].errors?.['pattern']" class="error-message" style="color: red;">
        Invalid phone number
      </div>
    </div>

    <div class="form-group">
      <label for="email">Email:</label>
      <input type="email" id="email" name="email" class="form-control" [(ngModel)]="newContact.email" required
      pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$">
      <div *ngIf="contactForm.controls['email'].errors?.['email']" class="error-message" style="color: red;">
        Invalid email. Please enter a valid email address.
      </div>
    </div>

    <div class="form-group">
      <label for="fullName">Full Name:</label>
      <input type="text" id="fullName" name="fullName" class="form-control" [(ngModel)]="newContact.fullName" required>
    </div>

    <div class="dialog-actions">
      <button type="submit" [disabled]="contactForm.invalid">
        {{ data.isEdit ? 'Update Contact' : 'Add Contact' }}
      </button>
    </div>
  </form>
</div>
